# Conventions

## Core Principles

### Developer Ergonomics First

Optimize for the developer reading the code, not just the machine executing it.
Maintainable, readable, and easy-to-work-with code is the default goal.
When brevity conflicts with clarity, choose clarity.

### Self-Documenting Code

Let naming, structure, and types communicate intent. Add comments only for:

- **Non-obvious logic** — e.g., a workaround for a library or browser quirk
- **Non-conventional patterns** — intentional deviation from the norm (explain why)
- **Especially complex algorithms or state machines**

Don't comment what the code clearly does. Comment *why* it does it.

## File & Naming

| What | Convention | Example |
|------|-----------|---------|
| React components | PascalCase | `UserProfile.tsx` |
| Utility modules | camelCase | `formatDate.ts` |
| Route directories | lowercase | `src/app/dashboard/` |
| CSS files | kebab-case or `globals.css` | `globals.css` |

No barrel files (`index.ts` re-exports). Import from the actual file.

## TypeScript

### Prefer `interface` over `type`

Use `interface` for object shapes, component props, and API contracts.
Use `type` only when `interface` cannot express it:
- Union types: `type Status = "active" | "inactive"`
- Intersection types built from non-object shapes
- Mapped types and conditional types

### No `any`

Use `unknown` when the type is genuinely unknown, then narrow with guards.
`any` disables type checking — avoid it entirely.

## Component Patterns

- **Server components by default** — only add `"use client"` when the component needs browser APIs, event handlers, or state.
- **Props typing** — inline by default; switch to `interface Props` (not `type Props`) when readability suffers or the interface is referenced elsewhere. Use judgment.
- **No manual memoization** — React Compiler handles it. Don't add `useMemo`, `useCallback`, or `React.memo`.

## Styling

- Prefer Tailwind utility classes for all styling — over inline `style={}`, CSS Modules, or custom CSS. Reserve inline `style={}` only for values computed at runtime that cannot be expressed as a static Tailwind class.
- Biome enforces sorted classes (`useSortedClasses` rule).
- Dark mode uses `prefers-color-scheme` media query (not a class toggle). Theme tokens live in `src/app/globals.css`.
- Reference theme tokens via Tailwind: `bg-background`, `text-foreground`.

## Code Quality (Biome Config)

| Setting | Value |
|---------|-------|
| Indent | 2 spaces |
| Semicolons | as needed (omitted where optional) |
| Arrow parens | always (`(x) => ...`) |
| Bracket spacing | `{ x }` not `{x}` |
| Import organization | automatic (Biome assist) |
| Lint rules | recommended + React/Next.js domains |
| `noConsole` | warn |
| `useSortedClasses` | warn |

## Gotchas

- `next-env.d.ts` is auto-generated by Next.js — don't edit it.
- `bun.lock` is a binary lockfile — don't try to read or edit it.
- React Compiler is experimental (`babel-plugin-react-compiler` 1.0.0) — if you hit odd rendering bugs, check compiler output first.
- Biome's `noUnknownAtRules` is disabled to allow Tailwind v4 directives (`@theme`, `@import "tailwindcss"`).
